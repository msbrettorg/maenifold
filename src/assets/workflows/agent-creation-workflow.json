{
  "id": "agent-creation-workflow",
  "name": "Constitutional Agent Architecture Workflow",
  "emoji": "ü§ñ",
  "description": "Systematic workflow for creating/updating Claude Code plugin agents using constitutional AI and prompt engineering excellence",
  "triggers": [
    "create agent",
    "update agent",
    "new agent",
    "agent creation",
    "constitutional agent",
    "prompt engineering agent",
    "specialist agent design",
    "cognitive architecture agent",
    "agent enhancement",
    "10/10 agent creation",
    "plugin agent"
  ],
  "enhancedThinkingEnabled": true,
  "steps": [
    {
      "id": "assume-prompt-engineer-role",
      "name": "üß© Assume Prompt Engineer Role",
      "description": "Activate constitutional prompt architecture expertise.\n\nUse Adopt tool with roleId 'prompt-engineer' to activate The Prompt Architect cognitive framework with 10/10 constitutional AI capabilities.\n\n‚ö†Ô∏è CRITICAL: This role provides systematic methodology, evidence-based optimization, and meta-cognitive scaffolding for perfect agent creation.",
      "requiresEnhancedThinking": false
    },
    {
      "id": "define-agent-specifications",
      "name": "üìã Define Agent Specifications",
      "description": "Establish clear constitutional architecture requirements for the target agent.\n\nüß† ENHANCED THINKING REQUIRED: Use the SequentialThinking tool to systematically analyze agent requirements.\n\nDefine: domain expertise, autonomous capabilities, constitutional principles, evaluation criteria, performance targets, tool requirements, and integration patterns. What specific intelligence amplification should this agent provide as an autonomous subprocess?\n\nOutput target: ~/.claude/agents/<agent-name>.md (globally auto-discovered, no registration needed).",
      "requiresEnhancedThinking": true
    },
    {
      "id": "check-existing-agent",
      "name": "üîç Check Existing Agent",
      "description": "Determine if agent already exists and assess current implementation.\n\nList all existing agent files in ~/.claude/agents/ to check for name conflicts. If the proposed agent name conflicts with an existing agent, choose a different name that avoids collision.\n\nAlso load the plugin-dev:plugin-structure skill and check installed plugins' agents/ directories for conflicts, since plugin-scoped agents share the namespace at runtime.\n\nIf the agent already exists in ~/.claude/agents/, read and analyze current implementation against 10/10 constitutional architecture standards.\n\n‚ö†Ô∏è CRITICAL: Document gaps and enhancement opportunities for systematic improvement.",
      "requiresEnhancedThinking": false
    },
    {
      "id": "review-existing-agent-architecture",
      "name": "üî¨ Review Existing Agent Architecture",
      "description": "If agent exists, conduct comprehensive constitutional architecture analysis.\n\nüß† ENHANCED THINKING REQUIRED: Use the SequentialThinking tool for systematic evaluation.\n\nEvaluate against: constitutional coherence, architectural clarity, meta-cognitive scaffolding, context efficiency, failure resilience, dynamic adaptability. Apply 10/10 framework assessment.\n\nReview: YAML frontmatter completeness (name, description with examples, model, color, tools), system prompt quality, triggering precision.",
      "requiresEnhancedThinking": true
    },
    {
      "id": "access-prompt-engineering-checklists",
      "name": "üìö Access Prompt Engineering Checklists",
      "description": "Load comprehensive evaluation frameworks from memory.\n\nSearch memory://prompt-engineering for all implementation checklists: GPT-4.1 System Prompt Patterns, Agentic Workflows, Instruction Following Framework, Chain of Thought Patterns, Error Handling Strategies, Performance Optimization.\n\n‚ö†Ô∏è CRITICAL: These checklists provide 10/10 validation criteria.",
      "requiresEnhancedThinking": false
    },
    {
      "id": "research-domain-knowledge",
      "name": "üîé Research Domain Knowledge",
      "description": "Systematic research for agent domain expertise and patterns.\n\nüß† ENHANCED THINKING REQUIRED: Use the SequentialThinking tool to coordinate comprehensive research.\n\nResearch sequence:\n1. Search memory:// for existing domain knowledge using SearchMemories tool\n2. Search codebase for relevant implementation patterns\n3. Use context7 for current industry standards and best practices\n4. Document all findings in memory:// using WriteMemory with proper [[Wiki Links]] and tags",
      "requiresEnhancedThinking": true
    },
    {
      "id": "analyze-constitutional-requirements",
      "name": "‚öñÔ∏è Analyze Constitutional Requirements",
      "description": "Define constitutional AI principles and frameworks for the agent.\n\nüß† ENHANCED THINKING REQUIRED: Use the SequentialThinking tool for constitutional analysis.\n\nDesign: core principles, anti-pattern recognition, value alignment mechanisms, evaluation criteria, and performance monitoring frameworks. How will this agent embed persistent constitutional thinking in its autonomous operation?",
      "requiresEnhancedThinking": true
    },
    {
      "id": "design-cognitive-architecture",
      "name": "üèóÔ∏è Design Cognitive Architecture",
      "description": "Create systematic cognitive scaffolding and meta-cognitive frameworks for the agent's system prompt.\n\nüß† ENHANCED THINKING REQUIRED: Use the SequentialThinking tool for architectural design.\n\nDesign: system prompt structure (role, responsibilities, process, output format, edge cases), tool selection strategy (least-privilege principle), triggering conditions and example blocks, context loading strategies, and quality frameworks.",
      "requiresEnhancedThinking": true
    },
    {
      "id": "implement-agent-structure",
      "name": "üî® Implement Agent Structure",
      "description": "Create complete agent markdown file with YAML frontmatter and constitutional system prompt.\n\nLoad the plugin-dev:agent-development skill as the canonical schema reference for agent file structure, frontmatter validation rules, tool options, color semantics, and system prompt patterns.\n\nImplement YAML frontmatter: name (lowercase-hyphens, 3-50 chars), description (triggering conditions with 2-4 <example> blocks including context/user/assistant/commentary), model (inherit|sonnet|opus|haiku), color (blue|cyan|green|yellow|magenta|red), tools (array, least-privilege).\n\nImplement system prompt body: role description (second person), core responsibilities, analysis process, quality standards, output format, edge cases.\n\n‚ö†Ô∏è CRITICAL: Follow exact Claude Code agent markdown schema with 10/10 constitutional integration.",
      "requiresEnhancedThinking": false
    },
    {
      "id": "integrate-performance-monitoring",
      "name": "üìä Integrate Performance Monitoring",
      "description": "Add systematic performance measurement and optimization frameworks to the agent's system prompt.\n\nüß† ENHANCED THINKING REQUIRED: Use the SequentialThinking tool for monitoring design.\n\nImplement: specific KPI targets (>95% accuracy baselines), quality standards within the system prompt, self-validation protocols, and output format constraints. How will agent performance be measured and optimized?",
      "requiresEnhancedThinking": true
    },
    {
      "id": "add-documentation-framework",
      "name": "üìñ Add Documentation Framework",
      "description": "Implement comprehensive documentation and knowledge transfer systems within the agent's system prompt.\n\nAdd: output format templates, troubleshooting guidance with decision trees, edge case handling protocols, and maintenance specifications.\n\n‚ö†Ô∏è CRITICAL: Enable systematic deployment and continuous improvement.",
      "requiresEnhancedThinking": false
    },
    {
      "id": "implement-example-protocols",
      "name": "üí° Implement Example Protocols",
      "description": "Create concrete triggering examples and demonstration frameworks with progressive complexity.\n\nüß† ENHANCED THINKING REQUIRED: Use the SequentialThinking tool for example design.\n\nDevelop: 2-4 <example> blocks in the description field showing context/user/assistant/commentary, progressive complexity models, anti-pattern illustrations, and edge case protocols. How will Claude know precisely when to trigger this agent?",
      "requiresEnhancedThinking": true
    },
    {
      "id": "validate-against-system-prompt-patterns",
      "name": "üéØ Validate Against System Prompt Patterns",
      "description": "Systematic evaluation against GPT-4.1 System Prompt Patterns checklist.\n\nValidate: three-pillar architecture, context management, tool integration, chain of thought integration, instruction following, error handling patterns. Document compliance score and enhancement opportunities.\n\n‚ö†Ô∏è CRITICAL: Target 10/10 constitutional architecture score.",
      "requiresEnhancedThinking": false
    },
    {
      "id": "validate-against-agentic-workflows",
      "name": "ü§ñ Validate Against Agentic Workflows",
      "description": "Systematic evaluation against GPT-4.1 Agentic Workflows checklist.\n\nüß† ENHANCED THINKING REQUIRED: Use the SequentialThinking tool for systematic validation.\n\nValidate: three-pillar architecture, problem-solving workflows, meta-cognitive patterns, state management, tool integration, performance optimization. Does this agent enable autonomous intelligent behavior?",
      "requiresEnhancedThinking": true
    },
    {
      "id": "validate-against-instruction-following",
      "name": "üìã Validate Against Instruction Following Framework",
      "description": "Systematic evaluation against Instruction Following Framework checklist.\n\nValidate: structured instructions, example-driven guidance, conditional logic, meta-instruction framework, hierarchical architecture, behavioral consistency. Does this agent's system prompt provide clear, systematic guidance for autonomous operation?",
      "requiresEnhancedThinking": false
    },
    {
      "id": "validate-against-fundamentals",
      "name": "üîß Validate Against Prompt Engineering Fundamentals",
      "description": "Systematic evaluation against Fundamentals Implementation checklist.\n\nüß† ENHANCED THINKING REQUIRED: Use the SequentialThinking tool for comprehensive validation.\n\nValidate: prompt structure architecture, template systems, variable frameworks, quality assurance, delimiter strategies, documentation standards. Does this agent demonstrate foundational excellence?",
      "requiresEnhancedThinking": true
    },
    {
      "id": "validate-against-error-handling",
      "name": "üõ°Ô∏è Validate Against Error Handling Strategies",
      "description": "Systematic evaluation against Error Handling Strategies checklist.\n\nValidate: failure mode detection, validation patterns, recovery procedures, preventive design, monitoring integration, graceful degradation. Does this agent prevent and handle systematic failures in its autonomous operation?",
      "requiresEnhancedThinking": false
    },
    {
      "id": "validate-against-chain-of-thought",
      "name": "üîó Validate Against Chain of Thought Patterns",
      "description": "Systematic evaluation against Chain of Thought Patterns checklist.\n\nüß† ENHANCED THINKING REQUIRED: Use the SequentialThinking tool for reasoning validation.\n\nValidate: basic CoT templates, advanced reasoning, error analysis, quality enhancement, integration patterns, performance tracking. Does this agent enable systematic reasoning and meta-cognitive enhancement?",
      "requiresEnhancedThinking": true
    },
    {
      "id": "calculate-overall-constitutional-score",
      "name": "üìà Calculate Overall Constitutional Score",
      "description": "Compute comprehensive constitutional architecture score across all frameworks.\n\nüß† ENHANCED THINKING REQUIRED: Use the SequentialThinking tool for systematic scoring.\n\nCalculate scores for: constitutional coherence, architectural clarity, meta-cognitive scaffolding, context efficiency, failure resilience, dynamic adaptability. Target: 10/10 overall constitutional excellence.",
      "requiresEnhancedThinking": true
    },
    {
      "id": "implement-enhancement-recommendations",
      "name": "‚ö° Implement Enhancement Recommendations",
      "description": "Apply systematic improvements to achieve 10/10 constitutional architecture.\n\nImplement all identified enhancements: missing frameworks, performance targets, system prompt refinements, example protocols, tool scope adjustments, validation mechanisms. Continue until 10/10 score achieved across all evaluation criteria.\n\n‚ö†Ô∏è CRITICAL: No compromises on constitutional excellence.",
      "requiresEnhancedThinking": false
    },
    {
      "id": "final-validation-and-deployment",
      "name": "‚úÖ Final Validation and Deployment",
      "description": "Comprehensive validation and agent deployment to the target plugin's agents/ directory.\n\nüß† ENHANCED THINKING REQUIRED: Use the SequentialThinking tool for final validation.\n\nValidate: all checklists score 10/10, constitutional architecture complete, performance monitoring integrated, documentation comprehensive, examples clear, deployment ready.\n\nValidate agent file structure: YAML frontmatter (name, description, model, color, tools), system prompt body (second person, responsibilities, process, output format, edge cases). Save to ~/.claude/agents/<agent-name>.md with proper markdown formatting. Create the directory if it does not exist.\n\nInvoke the plugin-dev:plugin-validator agent to perform structural validation of the generated agent file within its target plugin context. This catches malformed frontmatter, missing required fields, and bad identifier patterns before deployment.",
      "requiresEnhancedThinking": true
    },
    {
      "id": "document-creation-methodology",
      "name": "üìù Document Creation Methodology",
      "description": "Document the complete agent creation process and lessons learned.\n\nSave to memory:// using WriteMemory: constitutional design patterns used, evaluation methodologies applied, enhancement techniques implemented, performance achievements, and process improvements for future agent creation.\n\n‚ö†Ô∏è CRITICAL: Build institutional knowledge for systematic agent excellence.",
      "requiresEnhancedThinking": false
    }
  ]
}
