@import "tailwindcss";

/* T-SITE-001.2: RTM FR-15.x — Design System: Warm Restraint */

@theme {
  --color-bg: var(--bg);
  --color-bg-surface: var(--bg-surface);
  --color-bg-hover: var(--bg-hover);
  --color-border: var(--border);
  --color-text: var(--text);
  --color-text-secondary: var(--text-secondary);
  --color-accent: var(--accent);
  --color-accent-hover: var(--accent-hover);
  --color-accent-muted: var(--accent-muted);
  --color-code-bg: var(--code-bg);
  --color-code-text: var(--code-text);
}

@layer base {
  /* Dark mode — default (:root) */
  :root {
    --bg:               #141218;
    --bg-surface:       #1E1B22;
    --bg-hover:         #2A2630;
    --border:           #2A2630;
    --text:             #E8E0DB;
    --text-secondary:   #9A938E;
    --accent:           #6AABB3;
    --accent-hover:     #8AC0C6;
    --accent-muted:     #2A3A3D;
    --code-bg:          #18151C;
    --code-text:        #D4CEC8;
  }

  /* Light mode — explicit .light class on <html> */
  .light {
    --bg:               #F5F0EC;
    --bg-surface:       #FFFFFF;
    --bg-hover:         #EDE7E2;
    --border:           #DDD6D0;
    --text:             #1E1B22;
    --text-secondary:   #7A746F;
    --accent:           #3A8A94;
    --accent-hover:     #2A7A84;
    --accent-muted:     #D0E8EA;
    --code-bg:          #F8F5F2;
    --code-text:        #1E1B22;
  }

  /* Light mode — OS preference fallback (no explicit dark override) */
  @media (prefers-color-scheme: light) {
    :root:not(.dark) {
      --bg:               #F5F0EC;
      --bg-surface:       #FFFFFF;
      --bg-hover:         #EDE7E2;
      --border:           #DDD6D0;
      --text:             #1E1B22;
      --text-secondary:   #7A746F;
      --accent:           #3A8A94;
      --accent-hover:     #2A7A84;
      --accent-muted:     #D0E8EA;
      --code-bg:          #F8F5F2;
      --code-text:        #1E1B22;
    }
  }

  /* Typography — body */
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
      'Helvetica Neue', Arial, sans-serif;
    font-size: 16px;
    line-height: 1.75;
    color: var(--text);
    background-color: var(--bg);
  }

  /* Grain texture overlay — feTurbulence noise at 3% opacity */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 9999;
    opacity: 0.03;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    background-repeat: repeat;
  }

  /* Monospace — code, pre, kbd */
  code, pre, kbd {
    font-family: ui-monospace, 'Cascadia Code', 'SF Mono', Menlo, Consolas,
      'Liberation Mono', monospace;
    font-size: 14px;
    line-height: 1.6;
  }

  /* Headings */
  h1 { font-size: 32px; font-weight: 600; }
  h2 { font-size: 24px; font-weight: 600; }
  h3 { font-size: 20px; font-weight: 600; }

  /* Links */
  a { color: var(--accent); text-decoration: none; }
  a:hover { color: var(--accent-hover); text-decoration: underline; }
}

/* Layout utilities */
.prose-width    { max-width: 72ch; margin-inline: auto; }
.code-width     { max-width: 900px; margin-inline: auto; }
.section-gap    { margin-block: 5rem; }
.subsection-gap { margin-block: 3rem; }

/* T-SITE-001.2a: RTM FR-15.10, NFR-15.5 — Markdown content styles */
.markdown-content h1 { margin-block: 2rem 1rem; }
.markdown-content h2 { margin-block: 3rem 1rem; border-bottom: 1px solid var(--border); padding-bottom: 0.5rem; }
.markdown-content h3 { margin-block: 2rem 0.75rem; }
.markdown-content p { margin-block: 1.5rem; }
.markdown-content ul, .markdown-content ol { margin-block: 1rem; padding-left: 2rem; }
.markdown-content li { margin-block: 0.25rem; }
.markdown-content table { width: 100%; border-collapse: collapse; margin-block: 1.5rem; }
.markdown-content th, .markdown-content td { padding: 0.5rem 1rem; border: 1px solid var(--border); text-align: left; }
.markdown-content th { background-color: var(--bg-surface); font-weight: 600; }
.markdown-content blockquote { border-left: 3px solid var(--accent); padding-left: 1rem; color: var(--text-secondary); margin-block: 1.5rem; }

.code-block { position: relative; margin-block: 1.5rem; border-radius: 8px; overflow: hidden; }
.code-block pre { padding: 1.25rem; overflow-x: auto; background-color: var(--code-bg) !important; }

.mermaid-diagram { margin-block: 2rem; text-align: center; }
.mermaid-diagram svg { max-width: 100%; height: auto; }
